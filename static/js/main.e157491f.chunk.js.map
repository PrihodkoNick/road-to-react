{"version":3,"sources":["button/index.js","button/button.js","search/index.js","search/search.js","table/table.js","table/index.js","loading/index.js","loading/loading.js","App.js","index.js"],"names":["Button","onClick","className","children","type","Search","this","input","focus","props","searchTerm","onChange","onSubmit","value","ref","node","Component","SORTS","NONE","list","TITLE","sortBy","AUTHOR","COMMENTS","reverse","POINTS","Sort","sortKey","onSort","activeSortKey","sortClass","classNames","Table","state","isSortReverse","setState","onDismiss","sortedList","reverseSortedList","style","width","map","item","idx","key","objectID","href","url","title","author","num_comments","points","Loading","PATH_BASE","App","_isMounted","results","searchKey","error","isLoading","setSearchTopStories","result","hits","page","prevState","oldHits","newHits","needsToSearchTopStories","id","updatedHits","filter","onSearchChange","evt","target","onSearchSubmit","console","log","fetchData","preventDefault","axios","then","data","catch","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e157491f.chunk.js","sourcesContent":["import Button from \"./button\";\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\n\r\nconst Button = ({ onClick, className = \"\", children }) => (\r\n  <button onClick={onClick} className={className} type=\"button\">\r\n    {children}\r\n  </button>\r\n);\r\n\r\nexport default Button;\r\n","import Search from \"./search\";\r\n\r\nexport default Search;\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Search extends Component {\r\n  componentDidMount() {\r\n    if (this.input) {\r\n      this.input.focus();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { searchTerm, onChange, onSubmit, children } = this.props;\r\n\r\n    return (\r\n      <form onSubmit={onSubmit}>\r\n        {`${children}: `}\r\n        <input\r\n          type=\"text\"\r\n          value={searchTerm}\r\n          onChange={onChange}\r\n          ref={(node) => {\r\n            this.input = node;\r\n          }}\r\n        />\r\n        <button type=\"submit\">{children}</button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { sortBy } from \"lodash\";\r\n\r\nimport Button from \"../button\";\r\n\r\nconst SORTS = {\r\n  NONE: (list) => list,\r\n  TITLE: (list) => sortBy(list, \"title\"),\r\n  AUTHOR: (list) => sortBy(list, \"author\"),\r\n  COMMENTS: (list) => sortBy(list, \"num_comments\").reverse(),\r\n  POINTS: (list) => sortBy(list, \"points\").reverse(),\r\n};\r\n\r\nconst Sort = ({ sortKey, onSort, children, activeSortKey }) => {\r\n  const sortClass = classNames(\"button-inline\", {\r\n    \"button-active\": sortKey === activeSortKey,\r\n  });\r\n\r\n  return (\r\n    <Button className={sortClass} onClick={() => onSort(sortKey)}>\r\n      {children}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default class Table extends Component {\r\n  state = { sortKey: \"NONE\", isSortReverse: false };\r\n\r\n  onSort = (sortKey) => {\r\n    const isSortReverse =\r\n      this.state.sortKey === sortKey && !this.state.isSortReverse;\r\n    this.setState({ sortKey, isSortReverse });\r\n  };\r\n\r\n  render() {\r\n    const { list, onDismiss } = this.props;\r\n\r\n    const { sortKey, isSortReverse } = this.state;\r\n\r\n    const sortedList = SORTS[sortKey](list);\r\n    const reverseSortedList = isSortReverse ? sortedList.reverse() : sortedList;\r\n\r\n    return (\r\n      <div className=\"table\">\r\n        <div className=\"table-header\">\r\n          <span style={{ width: \"40%\" }}>\r\n            <Sort\r\n              sortKey={\"TITLE\"}\r\n              onSort={this.onSort}\r\n              activeSortKey={sortKey}\r\n            >\r\n              Заголовок\r\n            </Sort>\r\n          </span>\r\n          <span style={{ width: \"30%\" }}>\r\n            <Sort\r\n              sortKey={\"AUTHOR\"}\r\n              onSort={this.onSort}\r\n              activeSortKey={sortKey}\r\n            >\r\n              Автор\r\n            </Sort>\r\n          </span>\r\n          <span style={{ width: \"10%\" }}>\r\n            <Sort\r\n              sortKey={\"COMMENTS\"}\r\n              onSort={this.onSort}\r\n              activeSortKey={sortKey}\r\n            >\r\n              Комментарии\r\n            </Sort>\r\n          </span>\r\n          <span style={{ width: \"10%\" }}>\r\n            <Sort\r\n              sortKey={\"POINTS\"}\r\n              onSort={this.onSort}\r\n              activeSortKey={sortKey}\r\n            >\r\n              Очки\r\n            </Sort>\r\n          </span>\r\n          <span style={{ width: \"10%\" }}>Архив</span>\r\n        </div>\r\n\r\n        {reverseSortedList.map((item, idx) => (\r\n          <div key={item.objectID} className=\"table-row\">\r\n            <span>{idx + 1}</span>\r\n            <span>\r\n              <a href={item.url}>{item.title}</a>\r\n            </span>\r\n            <span> {item.author}</span>\r\n            <span> {item.num_comments}</span>\r\n            <span> {item.points}</span>\r\n            <span>\r\n              <Button\r\n                onClick={() => onDismiss(item.objectID)}\r\n                className=\"button-inline\"\r\n              >\r\n                Отбросить\r\n              </Button>\r\n            </span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Table from \"./table\";\r\n\r\nexport default Table;\r\n","import Loading from \"./loading\";\r\n\r\nexport default Loading;\r\n","import React from \"react\";\r\n\r\nconst Loading = () => {\r\n  return <p>Loading...</p>;\r\n};\r\n\r\nexport default Loading;\r\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport \"./App.css\";\n\nimport Button from \"./button\";\nimport Search from \"./search\";\nimport Table from \"./table\";\nimport Loading from \"./loading\";\n\nconst DEFAULT_QUERY = \"redux\";\nconst DEFAULT_HPP = \"10\";\n\nconst PATH_BASE = \"https://hn.algolia.com/api/v1\";\nconst PATH_SEARCH = \"/search\";\nconst PARAM_SEARCH = \"query=\";\nconst PARAM_PAGE = \"page=\";\nconst PARAM_HPP = \"hitsPerPage=\";\n\n// APP\nexport default class App extends Component {\n  _isMounted = false;\n\n  state = {\n    searchTerm: DEFAULT_QUERY,\n    results: null,\n    searchKey: \"\",\n    error: null,\n    isLoading: false,\n  };\n\n  setSearchTopStories = (result) => {\n    const { hits, page } = result;\n\n    this.setState((prevState) => {\n      const { searchKey, results } = prevState;\n\n      const oldHits =\n        results && results[searchKey] ? results[searchKey].hits : [];\n\n      const newHits = [...oldHits, ...hits];\n\n      return {\n        results: {\n          ...results,\n          [searchKey]: { hits: newHits, page },\n          isLoading: false,\n        },\n      };\n    });\n  };\n\n  needsToSearchTopStories = (searchTerm) => {\n    return !this.state.results[searchTerm];\n  };\n\n  onDismiss = (id) => {\n    const { searchKey, results } = this.state;\n    const { hits, page } = results[searchKey];\n\n    const isNotId = (item) => item.objectID !== id;\n    const updatedHits = hits.filter(isNotId);\n    this.setState({\n      results: {\n        ...results,\n        [searchKey]: { hits: updatedHits, page },\n      },\n    });\n  };\n\n  onSearchChange = (evt) => {\n    this.setState({ searchTerm: evt.target.value });\n  };\n\n  onSearchSubmit = (evt) => {\n    console.log(this.state);\n    const { searchTerm } = this.state;\n    this.setState({ searchKey: searchTerm });\n\n    if (this.needsToSearchTopStories(searchTerm)) {\n      this.fetchData(searchTerm);\n    }\n\n    evt.preventDefault();\n  };\n\n  fetchData = (searchTerm, page = 0) => {\n    this.setState({ isLoading: true });\n\n    axios(\n      `${PATH_BASE}${PATH_SEARCH}?${PARAM_SEARCH}${searchTerm}&${PARAM_PAGE}${page}&${PARAM_HPP}${DEFAULT_HPP}`\n    )\n      .then(\n        (result) => this._isMounted && this.setSearchTopStories(result.data)\n      )\n      .catch((error) => this._isMounted && this.setState({ error }));\n  };\n\n  componentDidMount() {\n    this._isMounted = true;\n    const { searchTerm } = this.state;\n    this.setState({ searchKey: searchTerm });\n    this.fetchData(searchTerm);\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  // APP RENDER\n  render() {\n    const { results, searchTerm, searchKey, error, isLoading } = this.state;\n    const page =\n      (results && results[searchKey] && results[searchKey].page) || 0;\n    const list =\n      (results && results[searchKey] && results[searchKey].hits) || [];\n\n    if (error) {\n      return <p>Something went wrong!</p>;\n    }\n\n    return (\n      <div className=\"page\">\n        <div className=\"interactions\">\n          <Search\n            value={searchTerm}\n            onChange={this.onSearchChange}\n            onSubmit={this.onSearchSubmit}\n          >\n            Поиск\n          </Search>\n          {results && <Table list={list} onDismiss={this.onDismiss} />}\n          <div className=\"interactions\">\n            {isLoading ? (\n              <Loading />\n            ) : (\n              <Button onClick={() => this.fetchData(searchKey, page + 1)}>\n                Больше историй\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nif (module.hot) {\n  module.hot.accept();\n}\n"],"sourceRoot":""}