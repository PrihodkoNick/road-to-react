(this.webpackJsonphackernews=this.webpackJsonphackernews||[]).push([[0],{22:function(e,t,n){e.exports=n(48)},27:function(e,t,n){},45:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),s=n.n(c),o=(n(27),n(6)),i=n(8),u=n(9),l=n(2),h=n(3),m=n(5),p=n(4),f=n(20),v=n.n(f),S=(n(45),function(e){var t=e.onClick,n=e.className,a=void 0===n?"":n,c=e.children;return r.a.createElement("button",{onClick:t,className:a,type:"button"},c)}),y=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.input&&this.input.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.searchTerm,a=t.onChange,c=t.onSubmit,s=t.children;return r.a.createElement("form",{onSubmit:c},"".concat(s,": "),r.a.createElement("input",{type:"text",value:n,onChange:a,ref:function(t){e.input=t}}),r.a.createElement("button",{type:"submit"},s))}}]),n}(a.Component),b=n(21),E=n.n(b),d=n(7),O={NONE:function(e){return e},TITLE:function(e){return Object(d.sortBy)(e,"title")},AUTHOR:function(e){return Object(d.sortBy)(e,"author")},COMMENTS:function(e){return Object(d.sortBy)(e,"num_comments").reverse()},POINTS:function(e){return Object(d.sortBy)(e,"points").reverse()}},g=function(e){var t=e.sortKey,n=e.onSort,a=e.children,c=e.activeSortKey,s=E()("button-inline",{"button-active":t===c});return r.a.createElement(S,{className:s,onClick:function(){return n(t)}},a)},j=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={sortKey:"NONE",isSortReverse:!1},e.onSort=function(t){var n=e.state.sortKey===t&&!e.state.isSortReverse;e.setState({sortKey:t,isSortReverse:n})},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.list,n=e.onDismiss,a=this.state,c=a.sortKey,s=a.isSortReverse,o=O[c](t),i=s?o.reverse():o;return r.a.createElement("div",{className:"table"},r.a.createElement("div",{className:"table-header"},r.a.createElement("span",{style:{width:"40%"}},r.a.createElement(g,{sortKey:"TITLE",onSort:this.onSort,activeSortKey:c},"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a")),r.a.createElement("span",{style:{width:"30%"}},r.a.createElement(g,{sortKey:"AUTHOR",onSort:this.onSort,activeSortKey:c},"\u0410\u0432\u0442\u043e\u0440")),r.a.createElement("span",{style:{width:"10%"}},r.a.createElement(g,{sortKey:"COMMENTS",onSort:this.onSort,activeSortKey:c},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438")),r.a.createElement("span",{style:{width:"10%"}},r.a.createElement(g,{sortKey:"POINTS",onSort:this.onSort,activeSortKey:c},"\u041e\u0447\u043a\u0438")),r.a.createElement("span",{style:{width:"10%"}},"\u0410\u0440\u0445\u0438\u0432")),i.map((function(e,t){return r.a.createElement("div",{key:e.objectID,className:"table-row"},r.a.createElement("span",null,t+1),r.a.createElement("span",null,r.a.createElement("a",{href:e.url},e.title)),r.a.createElement("span",null," ",e.author),r.a.createElement("span",null," ",e.num_comments),r.a.createElement("span",null," ",e.points),r.a.createElement("span",null,r.a.createElement(S,{onClick:function(){return n(e.objectID)},className:"button-inline"},"\u041e\u0442\u0431\u0440\u043e\u0441\u0438\u0442\u044c")))})))}}]),n}(a.Component),T=function(){return r.a.createElement("p",null,"Loading...")},K="https://hn.algolia.com/api/v1",N=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._isMounted=!1,e.state={searchTerm:"redux",results:null,searchKey:"",error:null,isLoading:!1},e.setSearchTopStories=function(t){var n=t.hits,a=t.page;e.setState((function(e){var t,r=e.searchKey,c=e.results,s=c&&c[r]?c[r].hits:[],l=[].concat(Object(u.a)(s),Object(u.a)(n));return{results:Object(i.a)({},c,(t={},Object(o.a)(t,r,{hits:l,page:a}),Object(o.a)(t,"isLoading",!1),t))}}))},e.needsToSearchTopStories=function(t){return!e.state.results[t]},e.onDismiss=function(t){var n=e.state,a=n.searchKey,r=n.results,c=r[a],s=c.hits,u=c.page,l=s.filter((function(e){return e.objectID!==t}));e.setState({results:Object(i.a)({},r,Object(o.a)({},a,{hits:l,page:u}))})},e.onSearchChange=function(t){e.setState({searchTerm:t.target.value})},e.onSearchSubmit=function(t){console.log(e.state);var n=e.state.searchTerm;e.setState({searchKey:n}),e.needsToSearchTopStories(n)&&e.fetchData(n),t.preventDefault()},e.fetchData=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.setState({isLoading:!0}),v()("".concat(K).concat("/search","?").concat("query=").concat(t,"&").concat("page=").concat(n,"&").concat("hitsPerPage=").concat("10")).then((function(t){return e._isMounted&&e.setSearchTopStories(t.data)})).catch((function(t){return e._isMounted&&e.setState({error:t})}))},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0;var e=this.state.searchTerm;this.setState({searchKey:e}),this.fetchData(e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,n=t.results,a=t.searchTerm,c=t.searchKey,s=t.error,o=t.isLoading,i=n&&n[c]&&n[c].page||0,u=n&&n[c]&&n[c].hits||[];return s?r.a.createElement("p",null,"Something went wrong!"):r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"interactions"},r.a.createElement(y,{value:a,onChange:this.onSearchChange,onSubmit:this.onSearchSubmit},"\u041f\u043e\u0438\u0441\u043a"),n&&r.a.createElement(j,{list:u,onDismiss:this.onDismiss}),r.a.createElement("div",{className:"interactions"},o?r.a.createElement(T,null):r.a.createElement(S,{onClick:function(){return e.fetchData(c,i+1)}},"\u0411\u043e\u043b\u044c\u0448\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0439"))))}}]),n}(a.Component);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.e157491f.chunk.js.map